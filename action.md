[TOC]

## 发现页

### 获得所有众筹项目

接口需返回

```
众筹id(来自session)
众筹标题内容
众筹图片地址
众筹目标金额
众筹已筹金额(包括打赏)
参与众筹人数
好评率
```

### 获得热门众筹项目

接口需返回

```
众筹标题内容
众筹图片地址
众筹已筹金额
```

### 用户注册

```
在微信重定向验证身份过程中自动完成,将用户微信名称和头像作为用户在小程序中的用户名和头像
```

## 众筹相关

### 众筹支付

请求参数包括

```
众筹id
支付用户id
支付金额
```

接口需返回：

* 当用户金额不足时

  ```
  {
  	"error_code": 20001,
  	"error_msg": "no enough money to pay"
  }
  ```

* 当用户金额足够但因某些原因支付失败

  ```
  {
  	"status": 500,
  	"info": "fail",
  	"data": "支付失败的原因与相应的处理方法"
  }
  ```

* 用户支付成功

  ```
  {
  	"status": 200,
  	"info": "success",
  	"data": "微信公众号二维码图片url"
  }
  ```

  支付成功后将跳转至众筹结果页面，需要显示一张公众号的二维码，在支付成功接口的data内直接返回这个二维码的url

### 用户打赏众筹项目

请求参数将包括

```
支付用户id
被打赏的众筹项目id
打赏金额
```

接口需返回：

- 当用户金额不足时

  ```
  {
  	"error_code": 20001,
  	"error_msg": "no enough money to pay"
  }
  ```

- 当用户金额足够但因某些原因支付失败

  ```
  {
  	"status": 500,
  	"info": "fail",
  	"data": "支付失败的原因与相应的处理方法"
  }
  ```

- 用户支付成功

  ```
  {
  	"status": 200,
  	"info": "success",
  	"data": "微信公众号二维码图片url"
  }
  ```

### 通过众筹id获得众筹的发起人相关信息

请求参数包括

```
众筹id
```

接口需返回

```用户id(来自session)
用户头像url(来自session)
用户名称(来自session)
```

### 通过众筹id获得众筹所有信息

请求参数包括:

```
众筹id
```

接口返回应含有:

```
众筹id
众筹标题
众筹详细描述
已经参与众筹的人数
已筹金额
目标金额
众筹发起人的头像url
众筹发起人的名称
众筹发起人的用户id
众筹的发起时间
此次众筹的猪品种
此次众筹的猪的出栏预期体重
此次众筹的猪的养殖周期
```

### 通过众筹id获取众筹的动态

请求参数应包括:

```
众筹id
最多获得多少条动态(动态数量上限)
```

接口将返回：

```
动态x的图片url
动态x的id
动态x的文字内容
```

x将不大于请求参数中的动态数量上限

### 通过众筹id获取众筹的众筹记录

请求参数应包括:

```
众筹id
是否获得全部用户
最多获得多少个用户
```

接口将返回：

```
参与众筹的用户数量
众筹已达成金额总量
每个众筹用户的头像，id，支付时间。
```

### 通过众筹id获得其他优质猪推荐

请求参数应包括:

```
众筹id
最多获得多少个其他优质猪推荐数量
```

接口将返回：

```
众筹项目1的图片url，参与数量
```

### 众筹发起人更新养殖动态

请求参数包括：

```
目标众筹项目id
图片
动态文字内容
```

接口需返回：

```
{
	"status": 200,
	"info": "success",
	"data": {
		"flag": true,
		"activity_id": "动态id"
	}
}
```

### 通过动态id向指定动态追加图片

请求参数包括：

```
目标动态id
图片
```

接口需返回：

* 用户有追加权限/是目标动态对应项目的发起人

  ```
  {
  	"status": 200,
  	"info": "success",
  	"data": {
  		"flag": true,
  		"activity_id": "动态id"
  	}
  }
  ```

* 用户不具备对应权限

  ```
  {
      "error_code": 30001,
      "error_msg":"permission denied"
  }
  ```

  

### 通过众筹id获得众筹动态基本信息

请求参数应包括:

```
众筹id
```

接口将返回：

```
实时众筹参与人数，
众筹项目状态，
众筹项目的预估剩余时间
```

### 通过众筹id获得每一条众筹动态

请求参数应包括:

```
众筹id
获取第几页的动态
每一页有多少条动态
```

接口将返回：

```
动态1的id，文字描述，图片url数组
动态2…………
```



## 用户给项目点赞

### 查看当前用户是否给该项目点赞

请求参数包括：

```
众筹项目id
```

接口应返回：

* 以前已经点过赞

  ```
  {
  	"status": 200,
  	"info": "success",
  	"data": "has like before"
  }
  ```

* 以前没有点过赞

  ```
  {
  	"status": 200,
  	"info": "success",
  	"data": "no like before"
  }
  ```

### 用户点赞

请求参数包括：

```
众筹项目id
```

接口应返回：

- 以前已经点过赞

  ```
  {
  	"status": 200,
  	"info": "success",
  	"data": "has like before"
  }
  ```

- 以前没有点过赞

  ```
  {
  	"status": 200,
  	"info": "success",
  	"data": "like success"
  }
  ```